<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Efectividad de Ventas - Comparativo</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --border:#e5e7eb;

      --pos:#0b7a1d;
      --neg:#b91c1c;

      --navy:#2f3f51;
      --orange:#f39a2b;
      --yellow:#f2d56a;
      --green:#0b7a1d;

      --shadow: 0 12px 28px rgba(0,0,0,.08);
      --radius: 16px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .wrap{
      max-width: 1400px;
      margin: 0 auto;
      padding: 22px 26px 34px;
    }

    /* Header */
    .header{
      display:grid;
      grid-template-columns: 240px 1fr 200px;
      align-items:center;
      gap: 12px;
      margin-bottom: 14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-height: 70px;
    }
    .brand img{
      width: 210px;
      height:auto;
      display:block;
    }
    .title{
      text-align:center;
      font-size: 34px;
      letter-spacing: 1px;
      color: #6b6b6b;
      font-weight: 900;
      text-transform: uppercase;
      line-height: 1.1;
      margin: 0;
    }

    /* Controls */
    .controls{
      display:flex;
      justify-content: space-between;
      align-items: end;
      gap: 12px;
      flex-wrap: wrap;
      margin: 10px 0 16px;
    }
    .controls .left, .controls .right{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 8px 12px;
      background: #fff;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
      font-size: 12px;
      color: var(--muted);
    }
    input[type="search"]{
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      min-width: 260px;
      outline: none;
      background:#fff;
    }
    select, button{
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: #fff;
      cursor:pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
      font-size: 12px;
    }
    label.toggle{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      cursor:pointer;
      user-select:none;
      font-size: 12px;
      color: var(--muted);
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background:#fff;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
    }

    /* KPI grid */
    .kpi-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 18px;
    }
    .kpi{
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      min-height: 120px;
      display:flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .kpi .kpi-head{
      display:flex;
      justify-content: space-between;
      align-items:center;
      padding: 12px 14px 0;
      font-weight: 900;
      letter-spacing: .2px;
      font-size: 13px;
      opacity: .95;
    }
    .kpi .kpi-body{
      display:flex;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 14px 16px;
      align-items: end;
    }
    .kpi .big{
      font-size: 30px;
      font-weight: 500;
      line-height: 1;
      white-space: nowrap;
    }
    .kpi .sub{
      font-size: 12px;
      opacity: .9;
      white-space: nowrap;
      text-align: right;
    }
    .kpi .delta{
      font-size: 12px;
      font-weight: 900;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.25);
      border: 1px solid rgba(255,255,255,.35);
      white-space: nowrap;
    }
    .kpi.yellow{ background: var(--yellow); color:#111; box-shadow: 0 10px 24px rgba(0,0,0,.08); }
    .kpi.navy{ background: var(--navy); color:#fff; }
    .kpi.orange{ background: var(--orange); color:#fff; }
    .kpi.green{ background: var(--green); color:#fff; }

    .delta.pos{ color: #eaffea; }
    .delta.neg{ color: #ffeaea; }
    .delta.zero{ color: #f5f5f5; opacity: .9; }

    /* Table card */
    .card{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      background:#fff;
    }
    .table-wrap{ overflow:auto; }
    table{
      width:100%;
      border-collapse: collapse;
      min-width: 980px;
    }
    thead th{
      position: sticky;
      top:0;
      background: #f9fafb;
      border-bottom: 1px solid var(--border);
      padding: 12px 14px;
      text-align:left;
      font-size: 12px;
      color: #374151;
      user-select:none;
      white-space: nowrap;
    }
    thead th.sortable{ cursor:pointer; }
    tbody td{
      border-bottom: 1px solid var(--border);
      padding: 12px 14px;
      font-size: 13px;
      vertical-align: top;
    }
    tbody tr:hover td{ background:#f9fafb; }
    td.metric{ font-weight: 700; color:#111827; width: 44%; }
    td.num{ text-align:right; white-space: nowrap; font-variant-numeric: tabular-nums; }
    td.diff{ width: 22%; }

    .diffline{
      display:flex;
      align-items:center;
      justify-content: end;
      gap: 10px;
    }
    .bar{
      width: 120px;
      height: 8px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow:hidden;
    }
    .bar > span{
      display:block;
      height:100%;
      width: 0%;
      background: #111827;
      opacity: .65;
    }
    .bar.pos > span{ background: var(--pos); opacity: .85; }
    .bar.neg > span{ background: var(--neg); opacity: .85; }

    .txt.pos{ color: var(--pos); font-weight: 900; }
    .txt.neg{ color: var(--neg); font-weight: 900; }
    .txt.zero{ color: #111827; font-weight: 900; opacity: .65; }

    .footer{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      padding: 12px 14px;
      font-size: 12px;
      color: var(--muted);
      background:#fff;
      border-top: 1px solid var(--border);
    }

    @media (max-width: 1200px){
      .header{ grid-template-columns: 1fr; text-align:center; }
      .brand{ justify-content:center; }
      .kpi-grid{ grid-template-columns: repeat(2, 1fr); }
      .title{ font-size: 28px; }
    }
    @media (max-width: 560px){
      .kpi-grid{ grid-template-columns: 1fr; }
      input[type="search"]{ min-width: 180px; width: 100%; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- HEADER -->
    <div class="header">
      <div class="brand">
        <!-- Pon tu logo aquí (archivo local recomendado para GitHub) -->
        <img src="assets/elite-logo.png" alt="Elite Online Media" />
      </div>
      <h1 class="title">Efectividad de Ventas - Comparativo</h1>
      <div></div>
    </div>

    <!-- CONTROLS -->
    <div class="controls">
      <div class="left">
        <span class="pill" id="meta"></span>
        <label class="toggle">
          <input id="hideZeros" type="checkbox" />
          Ocultar ceros
        </label>
        <button id="reset">Reset</button>
      </div>

      <div class="right">
        <input id="q" type="search" placeholder="Buscar métrica..." autocomplete="off" />
        <select id="view">
          <option value="both" selected>Ver: KPIs + Tabla</option>
          <option value="kpis">Ver: Solo KPIs</option>
          <option value="table">Ver: Solo Tabla</option>
        </select>
      </div>
    </div>

    <!-- KPI GRID -->
    <section id="kpis" class="kpi-grid"></section>

    <!-- TABLE -->
    <section id="table" class="card">
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Métrica</th>
              <th class="sortable" data-key="a">16/01/2026 <span id="h-a"></span></th>
              <th class="sortable" data-key="b">19/01/2026 <span id="h-b"></span></th>
              <th class="sortable" data-key="d">Diferencia <span id="h-d"></span></th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
      <div class="footer">
        <div><strong id="count"></strong></div>
        <div>Click en encabezados para ordenar • Diferencias con barra proporcional</div>
      </div>
    </section>
  </div>

  <script>
    // =========================
    // DATA
    // =========================
    const DATE_A = "16/01/2026";
    const DATE_B = "19/01/2026";

    const DATA = [
      { metric: "Total de Llamadas (Dials)", a: "1,789", b: "2,044", d: "255" },
      { metric: "Total de Contactos", a: "682", b: "529", d: "-153" },
      { metric: "Tiempo Total de Llamada", a: "35:43:00", b: "29:28:29", d: "-6:14:31" },
      { metric: "Éxitos en Five9", a: "12", b: "8", d: "-4" },
      { metric: "Lead Inbound MM", a: "0", b: "0", d: "0" },
      { metric: "Presentaciones de Producto", a: "5", b: "11", d: "6" },
      { metric: "Cotizaciones", a: "2", b: "1", d: "-1" },
      { metric: "Éxitos en HubSpot", a: "0", b: "12", d: "12" },
      { metric: "Clientes Referidos", a: "0", b: "0", d: "0" },
      { metric: "Clientes Outbound", a: "0", b: "0", d: "0" },
      { metric: "Clientes Inbound Meses anteriores", a: "1", b: "1", d: "0" },
      { metric: "Cliente Nuevo Lead MM", a: "2", b: "1", d: "-1" },
      { metric: "Total Clientes", a: "3", b: "2", d: "-1" },
      { metric: "Facturación Total ($) (Dinero Nuevo)", a: "$3,100.00", b: "$2,500.00", d: "-$600.00" },
      { metric: "Campañas Nuevas", a: "1", b: "0", d: "-1" },
      { metric: "Tiempo Hablado por Agente", a: "2:22:00", b: "1:57", d: "-0:25:00" },
      { metric: "conversión de Clientes", a: "12.50%", b: "16.67%", d: "0" },
      { metric: "conversion Inbound MM", a: "0.00%", b: "0.00%", d: "0" },
      { metric: "(IPC)", a: "$45.19", b: "$312.50", d: "$267" }
    ];

    // =========================
    // STATE
    // =========================
    let query = "";
    let sortKey = null; // a | b | d
    let sortDir = "asc";
    let hideZeros = false;

    // =========================
    // HELPERS (parse values)
    // =========================
    function parseComparable(v){
      if (v == null) return { type: "text", value: "" };
      const s = String(v).trim();

      // Tiempo: -H:MM:SS / H:MM:SS / M:SS / H:MM
      const timeMatch = s.match(/^(-)?(\d+):(\d{1,2})(?::(\d{1,2}))?$/);
      if (timeMatch){
        const neg = !!timeMatch[1];
        const p1 = Number(timeMatch[2]);
        const p2 = Number(timeMatch[3]);
        const p3 = timeMatch[4] !== undefined ? Number(timeMatch[4]) : null;
        let seconds = 0;
        if (p3 !== null){
          seconds = p1 * 3600 + p2 * 60 + p3;
        } else {
          seconds = p1 * 60 + p2;
        }
        return { type: "num", value: neg ? -seconds : seconds, kind: "time" };
      }

      // Número ($, %, comas)
      const cleaned = s.replace(/\$/g,"").replace(/%/g,"").replace(/,/g,"").trim();
      const num = Number(cleaned);
      if (!Number.isNaN(num) && cleaned !== ""){
        return { type: "num", value: num, kind: s.includes("%") ? "pct" : (s.includes("$") ? "money" : "num") };
      }

      return { type: "text", value: s.toLowerCase(), kind: "text" };
    }

    function signClass(diffStr){
      const c = parseComparable(diffStr);
      if (c.type !== "num") return "zero";
      if (c.value > 0) return "pos";
      if (c.value < 0) return "neg";
      return "zero";
    }

    function isZeroDiff(diffStr){
      const c = parseComparable(diffStr);
      return c.type === "num" && c.value === 0;
    }

    // Magnitud para barras (en columna Diferencia)
    function diffMagnitude(rows){
      let maxAbs = 0;
      for (const r of rows){
        const c = parseComparable(r.d);
        if (c.type === "num"){
          const abs = Math.abs(c.value);
          if (abs > maxAbs) maxAbs = abs;
        }
      }
      return maxAbs || 1;
    }

    // =========================
    // FILTER + SORT
    // =========================
    function filtered(){
      let rows = DATA.slice();

      if (query){
        const q = query.toLowerCase().trim();
        rows = rows.filter(r => r.metric.toLowerCase().includes(q));
      }

      if (hideZeros){
        rows = rows.filter(r => !isZeroDiff(r.d));
      }

      return rows;
    }

    function sorted(rows){
      if (!sortKey) return rows;
      const dir = sortDir === "asc" ? 1 : -1;

      return rows.slice().sort((r1, r2) => {
        const c1 = parseComparable(r1[sortKey]);
        const c2 = parseComparable(r2[sortKey]);

        if (c1.type === "num" && c2.type === "num"){
          return (c1.value - c2.value) * dir;
        }
        return String(c1.value).localeCompare(String(c2.value)) * dir;
      });
    }

    function setHints(){
      const map = { a: "h-a", b: "h-b", d: "h-d" };
      Object.values(map).forEach(id => document.getElementById(id).textContent = "");
      if (!sortKey) return;
      document.getElementById(map[sortKey]).textContent = sortDir === "asc" ? " ▲" : " ▼";
    }

    // =========================
    // KPI BUILD (selección inteligente)
    // =========================
    function findMetric(nameIncludes){
      return DATA.find(r => r.metric.toLowerCase().includes(nameIncludes.toLowerCase()));
    }

    function kpiCard({ title, a, b, d, theme }){
      const cls = signClass(d);
      return `
        <div class="kpi ${theme}">
          <div class="kpi-head">
            <span>${title}</span>
            <span class="delta ${cls}">Δ ${d}</span>
          </div>
          <div class="kpi-body">
            <div class="big">${b}</div>
            <div class="sub">
              <div>${DATE_A}: <strong>${a}</strong></div>
              <div>${DATE_B}: <strong>${b}</strong></div>
            </div>
          </div>
        </div>
      `;
    }

    function renderKPIs(){
      const dials = findMetric("dials");
      const contactos = findMetric("contactos");
      const ttotal = findMetric("tiempo total de llamada");
      const exFive9 = findMetric("éxitos en five9");
      const exHubspot = findMetric("éxitos en hubspot");
      const totalClientes = findMetric("total clientes");
      const fact = findMetric("facturación total");
      const ipc = findMetric("(ipc)");
      const present = findMetric("presentaciones");
      const cot = findMetric("cotizaciones");

      const kpis = [
        dials && { title: dials.metric, ...dials, theme: "yellow" },
        contactos && { title: contactos.metric, ...contactos, theme: "yellow" },
        ttotal && { title: ttotal.metric, ...ttotal, theme: "navy" },
        present && { title: present.metric, ...present, theme: "navy" },
        cot && { title: cot.metric, ...cot, theme: "navy" },
        exFive9 && { title: exFive9.metric, ...exFive9, theme: "orange" },
        exHubspot && { title: exHubspot.metric, ...exHubspot, theme: "orange" },
        totalClientes && { title: totalClientes.metric, ...totalClientes, theme: "green" },
        fact && { title: fact.metric, ...fact, theme: "orange" },
        ipc && { title: ipc.metric, ...ipc, theme: "green" }
      ].filter(Boolean);

      document.getElementById("kpis").innerHTML = kpis.map(kpiCard).join("");
    }

    // =========================
    // TABLE RENDER
    // =========================
    function renderTable(){
      const tbody = document.getElementById("tbody");
      const rows = sorted(filtered());
      const maxAbs = diffMagnitude(rows);

      tbody.innerHTML = rows.map(r => {
        const cls = signClass(r.d);
        const c = parseComparable(r.d);
        const pct = (c.type === "num")
          ? Math.min(100, Math.round((Math.abs(c.value) / maxAbs) * 100))
          : 0;

        return `
          <tr>
            <td class="metric">${r.metric}</td>
            <td class="num">${r.a}</td>
            <td class="num">${r.b}</td>
            <td class="num diff">
              <div class="diffline">
                <div class="bar ${cls}"><span style="width:${pct}%"></span></div>
                <span class="txt ${cls}">${r.d}</span>
              </div>
            </td>
          </tr>
        `;
      }).join("");

      document.getElementById("count").textContent = `${rows.length} métricas mostradas`;
      setHints();
    }

    // =========================
    // VIEW TOGGLE
    // =========================
    function applyView(){
      const v = document.getElementById("view").value;
      const kpisEl = document.getElementById("kpis");
      const tableEl = document.getElementById("table");

      if (v === "kpis"){
        kpisEl.style.display = "grid";
        tableEl.style.display = "none";
      } else if (v === "table"){
        kpisEl.style.display = "none";
        tableEl.style.display = "block";
      } else {
        kpisEl.style.display = "grid";
        tableEl.style.display = "block";
      }
    }

    // =========================
    // EVENTS
    // =========================
    document.getElementById("q").addEventListener("input", (e) => {
      query = e.target.value;
      renderTable();
    });

    document.getElementById("hideZeros").addEventListener("change", (e) => {
      hideZeros = e.target.checked;
      renderTable();
    });

    document.getElementById("view").addEventListener("change", () => {
      applyView();
    });

    document.getElementById("reset").addEventListener("click", () => {
      query = "";
      sortKey = null;
      sortDir = "asc";
      hideZeros = false;

      document.getElementById("q").value = "";
      document.getElementById("hideZeros").checked = false;
      document.getElementById("view").value = "both";

      applyView();
      renderTable();
    });

    document.querySelectorAll("thead th.sortable").forEach(th => {
      th.addEventListener("click", () => {
        const key = th.getAttribute("data-key");
        if (sortKey === key){
          sortDir = (sortDir === "asc" ? "desc" : "asc");
        } else {
          sortKey = key;
          sortDir = "asc";
        }
        renderTable();
      });
    });

    // =========================
    // INIT
    // =========================
    document.getElementById("meta").textContent =
      `Comparativo ${DATE_A} vs ${DATE_B} • Actualizado: ${new Date().toLocaleString("es-ES")}`;

    renderKPIs();
    renderTable();
    applyView();
  </script>
</body>
</html>

    

       
